{{extend 'layout.html'}}

<div id="target"></div>


<script id="template" type="text/ractive">

<div>
    {{if auth.user_id is None:}}
    <div id="main_login">
    {{=A('Sign Up', _class='btn btn-primary btn-lg', _href=URL('default', 'user', args=['register']))}}
    {{=A('Sign In', _class='btn btn-primary btn-lg', _href=URL('default', 'user', args=['login']))}}
    </div>
    {{pass}}
    {% #if loading %}
    <div id="load_spinner">
    <i class="fa fa-spinner fa-pulse fa-2x"></i>
    </div>
    {% /if %}
</div>
<br><br>

<div class="container-fluid">
  <div class="row">

<table class="table table-bordered">
  <thead>
      <tr>
        <th class="col-md-1">#</th>
        <th class="col-md-9">Item</th>
        <th class="col-md-1">Price</th>
        <th class="col-md-1">Quantity</th>
      </tr>
  </thead>
  <tbody>
      {% #displayMenuDetail:id %}
      <tr>
        <td>1</td>
        <td>{% itemName %}</td>
        <td>{% itemPrice %}</td>
        <td><div class="input-group">
            <input type="number" class="form-control" id="exampleInputAmount" placeholder="Quantity"></div>
        </td>
      </tr>
      {% /displayMenuDetail %}
  <tbody>
</table>





  </div>
</div>


</script>


<script>


    $(document).ready(function () {

        var ractive = new Ractive({
            el: '#target',
            template: '#template',
            delimiters: ['{%', '%}'],
            tripleDelimiters: ['{%%', '%%}'],
            data: {
                loading: true,
                menuId: "{{=menuId}}",
                displayMenuDetail: {},


            }
        });



        $.ajax("{{=URL('default', 'getMenuDetail', user_signature=True)}}",
            {
                data: {
                    menuId: ractive.get('menuId'),
                },
                method: 'POST',
                success: function (data) {
                    ractive.set('displayMenuDetail', data['displayMenuDetail']);
                    ractive.set('loading', false);
                }
            }
        );
    });


</script>




